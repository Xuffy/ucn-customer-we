webpackJsonp([9],{"+Mie":function(t,e,a){var r=a("ZOyh");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("8855bcb8",r,!1)},"04QK":function(t,e,a){"use strict";function r(t){i||a("+Mie")}var o=a("ZMJk"),s=a("zQ7w"),i=!1,n=a("/Xao"),l=r,d=n(o.a,s.a,!1,l,"data-v-44ba65cc",null);d.options.__file="src\\components\\common\\image.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.a=d.exports},"08Y5":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-customer tx-container"},[a("div",{staticClass:"tx-form-search"},[a("Form",{ref:"formSearch",staticStyle:{"max-width":"1300px"},attrs:{model:t.formSearch,"label-width":65,inline:""}},[a("FormItem",{attrs:{label:"关键字"}},[a("Input",{attrs:{placeholder:"订单、昵称、设计师、手机号"},model:{value:t.formSearch.keyWord,callback:function(e){t.$set(t.formSearch,"keyWord",e)},expression:"formSearch.keyWord"}})],1),t._v(" "),a("FormItem",{attrs:{label:"订单级别"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.orderGrade,callback:function(e){t.$set(t.formSearch,"orderGrade",e)},expression:"formSearch.orderGrade"}},[a("Option",{attrs:{value:"A"}},[t._v("A")]),t._v(" "),a("Option",{attrs:{value:"B"}},[t._v("B")]),t._v(" "),a("Option",{attrs:{value:"C"}},[t._v("C")]),t._v(" "),a("Option",{attrs:{value:"D"}},[t._v("D")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"流程节点"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.node,callback:function(e){t.$set(t.formSearch,"node",e)},expression:"formSearch.node"}},[a("Option",{attrs:{value:"1"}},[t._v("订单生成")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("预约到店")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("生成工艺单")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("工厂生产")]),t._v(" "),a("Option",{attrs:{value:"5"}},[t._v("生产完成")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"订单金额"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("Input",{attrs:{placeholder:"最大值"},model:{value:t.formSearch.minPrice,callback:function(e){t.$set(t.formSearch,"minPrice",e)},expression:"formSearch.minPrice"}})],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("\n          ~")]),t._v(" "),a("Col",{attrs:{span:"11"}},[a("Input",{attrs:{placeholder:"最小值"},model:{value:t.formSearch.maxPrice,callback:function(e){t.$set(t.formSearch,"maxPrice",e)},expression:"formSearch.maxPrice"}})],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"性别标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.firstCategoryId,callback:function(e){t.$set(t.formSearch,"firstCategoryId",e)},expression:"formSearch.firstCategoryId"}},t._l(t.tagList,function(e){return 1==e.tagType?a("Option",{key:e.tagId,attrs:{value:e.tagId}},[t._v("\n            "+t._s(e.tagName)+"\n          ")]):t._e()}))],1),t._v(" "),a("FormItem",{attrs:{label:"款式标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.secondCategoryId,callback:function(e){t.$set(t.formSearch,"secondCategoryId",e)},expression:"formSearch.secondCategoryId"}},t._l(t.tagList,function(e){return 2==e.tagType?a("Option",{key:e.tagId,attrs:{value:e.tagId}},[t._v("\n            "+t._s(e.tagName)+"\n          ")]):t._e()}))],1),t._v(" "),a("FormItem",{attrs:{label:"季节标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.thirdCategoryId,callback:function(e){t.$set(t.formSearch,"thirdCategoryId",e)},expression:"formSearch.thirdCategoryId"}},t._l(t.tagList,function(e){return 3==e.tagType?a("Option",{key:e.tagId,attrs:{value:e.tagId}},[t._v("\n            "+t._s(e.tagName)+"\n          ")]):t._e()}))],1),t._v(" "),a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"240px"},attrs:{type:"daterange",confirm:"",placement:"bottom-end",placeholder:"选择时间范围"},model:{value:t.formSearch.time,callback:function(e){t.$set(t.formSearch,"time",e)},expression:"formSearch.time"}})],1),t._v(" "),a("FormItem",{attrs:{label:"处理状态"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.formSearch.status,callback:function(e){t.$set(t.formSearch,"status",e)},expression:"formSearch.status"}},[a("Option",{attrs:{value:"0"}},[t._v("待处理")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("待分配")])],1)],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.getOrderList(1)}}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset()}}},[t._v("重置")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"info"},on:{click:t.showExportData}},[a("Icon",{staticStyle:{"font-size":"14px"},attrs:{type:"ios-download-outline"}}),t._v("\n          导出数据\n        ")],1)],1)],1)],1),t._v(" "),a("Table",{ref:"orderTable",staticStyle:{"margin-top":"20px"},attrs:{border:"",loading:t.listLoading,columns:t.orderListTitle,data:t.order.data}}),t._v(" "),a("div",{staticStyle:{"text-align":"right",width:"100%","margin-top":"30px"}},[a("Page",{attrs:{total:t.order.totalSize,current:t.formSearch.page+1,"show-total":"","show-elevator":"","show-sizer":"",placement:"top"},on:{"on-change":t.getOrderList,"on-page-size-change":t.changePageSize}})],1),t._v(" "),a("Modal",{staticClass:"model-allot",attrs:{title:"分配订单",width:720,styles:{top:"20px"},"mask-closable":!1},model:{value:t.modelAllot,callback:function(e){t.modelAllot=e},expression:"modelAllot"}},[t.orderTagItem.systemTags&&t.orderTagItem.pictureInfo&&t.orderTagItem.commonTags?a("Form",{attrs:{model:t.formAllot,"label-width":90}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"订单编号："}},[t._v(t._s(t.orderItem.orderNo))])],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"下单时间："}},[t._v(t._s(t.orderItem.createDateStr))])],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户名称："}},[t._v(t._s(t.orderItem.customerName))])],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机号码："}},[t._v(t._s(t.orderItem.customerPhone))])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"需求内容："}},[t._v(t._s(t.orderTagItem.pictureInfo.description))]),t._v(" "),a("FormItem",{attrs:{label:"参考图片："}},t._l(t.orderTagItem.pictureInfo.new_pictures,function(t){return a("span",{staticStyle:{"margin-right":"5px"}},[a("v-image",{attrs:{src:t,width:66,height:88}})],1)})),t._v(" "),a("v-system-tag",{ref:"systemTag",attrs:{"sex-tag":t.formAllot.sexTagId,"style-tag":t.formAllot.styleTagId,"season-tag":t.formAllot.seasonTagId}}),t._v(" "),a("v-add-tag",{ref:"addTag",attrs:{"data-list":t.orderTagItem.pictureInfo.commonList}}),t._v(" "),a("FormItem",{attrs:{label:"添加备注：",prop:"desc"}},[a("Row",[a("Col",{attrs:{span:"20"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请填写备注"},model:{value:t.formAllot.assignComment,callback:function(e){t.$set(t.formAllot,"assignComment",e)},expression:"formAllot.assignComment"}})],1)],1)],1),t._v(" "),a("v-allot-designer",{ref:"allotDesigner",attrs:{designer:t.selectDesigner}})],1):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modelAllot=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.submitAllot()}}},[t._v("保存")])],1),t._v(" "),t.modelAllotLoading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),t._v(" "),a("Modal",{model:{value:t.exportModal.show,callback:function(e){t.$set(t.exportModal,"show",e)},expression:"exportModal.show"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("导出数据")])]),t._v(" "),a("Form",{staticStyle:{"padding-right":"30px"},attrs:{"label-width":90}},[a("FormItem",{attrs:{label:"导出文件名称"}},[a("Input",{attrs:{placeholder:"请填写导出文件名称"},model:{value:t.exportModal.name,callback:function(e){t.$set(t.exportModal,"name",e)},expression:"exportModal.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"导出数据规则"}},[a("Select",{model:{value:t.exportModal.type,callback:function(e){t.$set(t.exportModal,"type",e)},expression:"exportModal.type"}},[a("Option",{attrs:{value:1}},[t._v("导出所有数据")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("导出当前列表数据")])],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",loading:t.exportModal.loading},on:{click:function(e){t.exportData()}}},[t._v("确定\n      ")])],1)],1)],1)},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.a=s},"1nkq":function(t,e,a){var r=a("wDhi");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("6d4069e5",r,!1)},"9fxr":function(t,e,a){var r=a("d8+b");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("f7d37eb2",r,!1)},EhCw:function(t,e,a){"use strict";(function(t){var r=a("04QK");e.a={name:"allotDesigner",components:{VImage:r.a},props:{readonly:{type:Boolean,default:!1},designer:Object},data:function(){return{designerAllList:[],designerFilterList:[],designerAllot:{}}},mounted:function(){!t.isEmpty(this.designer)&&this.designer.name?(this.designerFilterList.push(this.designer),this.designerAllot=this.designer,this.selectDesigner(this.designerAllot)):this.getDesigners(!0)},watch:{},methods:{getData:function(){return this.designerAllot},validate:function(){return!!this.designerAllot.name||(this.$Message.warning("请选择设计师！"),!1)},selectDesigner:function(t){this.designerAllot=t,this.designerAllot.input=t.name},getDesigners:function(e){var a=this;if(this.designerAllot.input!==this.designerAllot.name&&(this.designerAllot={input:this.designerAllot.input}),e&&(this.designerAllot.input=""),t.isEmpty(this.designerAllList))return this.ajax.get("/v2/store/news/findDesignerList",{params:{designerName:""}}).then(function(t){a.designerAllList=t,a.getDesigners(!0)});this.designerFilterList=[],t.map(this.designerAllList,function(t){t.name.indexOf(a.designerAllot.input)>-1&&a.designerFilterList.push(t)})}}}}).call(e,a("u47Y"))},FGw9:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,"",""])},HCy0:function(t,e,a){"use strict";function r(t){i||a("1nkq")}var o=a("kWYF"),s=a("OtLT"),i=!1,n=a("/Xao"),l=r,d=n(o.a,s.a,!1,l,"data-v-378415f7",null);d.options.__file="src\\components\\order\\addTag.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.a=d.exports},KEEv:function(t,e,a){var r=a("FGw9");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("45a51d22",r,!1)},LR6q:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-order-allot-designer"},[a("Form",{attrs:{"label-width":90}},[t.readonly?t._e():a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"分配设计师："}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("Input",{attrs:{placeholder:"输入设计师名字"},on:{"on-keyup":function(e){t.getDesigners()}},model:{value:t.designerAllot.input,callback:function(e){t.$set(t.designerAllot,"input",e)},expression:"designerAllot.input"}})],1)],1)],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:t.readonly?"设计师：":""}},t._l(t.designerFilterList,function(e){return a("div",{staticClass:"designer-box",on:{click:function(a){t.selectDesigner(e)}}},[a("Card",{class:{"card-active":!t.readonly&&t.designerAllot.id===e.id},attrs:{padding:10}},[a("div",{staticStyle:{"text-align":"center","line-height":"15px"}},[a("v-image",{attrs:{src:e.photo,width:60,height:60,round:!0}}),t._v(" "),a("h6",{domProps:{textContent:t._s(e.name)}})],1)])],1)}))],1)],1)},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.a=s},OtLT:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-order-add-tag"},[a("Form",{attrs:{"label-width":90}},[t.readonly?t._e():a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"添加标签："}},[a("Input",{staticStyle:{"max-width":"200px","margin-right":"10px"},attrs:{placeholder:"自定义标签"},model:{value:t.addTagName,callback:function(e){t.addTagName=e},expression:"addTagName"}}),t._v(" "),a("Button",{attrs:{type:"ghost",loading:t.addTagLoading},on:{click:function(e){t.addTag()}}},[t._v("添加")])],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"已选标签："}},t._l(t.selected,function(e){return a("Tag",{key:e.id||e,attrs:{closable:!t.readonly,color:t.readonly?"default":"blue"},on:{"on-close":function(a){t.deleteTag(e)}}},[t._v("\n        "+t._s(e.tagName||e)+"\n      ")])})),t._v(" "),t.readonly?t._e():a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"推荐标签："}},t._l(t.recommendList,function(e){return a("Tag",{key:e.id,attrs:{color:t.isSelected(e)?"blue":"default"},nativeOn:{click:function(a){t.addTag(e)}}},[t._v(t._s(e.tagName)+"\n      ")])}))],1)],1)},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.a=s},Yy3t:function(t,e,a){"use strict";function r(t){i||a("9fxr")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("uLjh"),s=a("08Y5"),i=!1,n=a("/Xao"),l=r,d=n(o.a,s.a,!1,l,"data-v-016b2c56",null);d.options.__file="src\\views\\order\\customer\\index.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=d.exports},ZMJk:function(t,e,a){"use strict";e.a={name:"commonImage",props:{src:{type:String},width:{type:Number,default:0},height:{type:Number,default:0},round:{type:Boolean,default:!1},icon:{type:String,default:"image"},backColor:{type:String,default:"#F4F4F4"},fill:{type:Boolean,default:!0}},data:function(){return{imgSrc:"",isComplete:!1}},mounted:function(){this.imgSrc=this.ossFilter(this.src)},watch:{src:function(t){this.imgSrc=this.ossFilter(t)}},methods:{getData:function(t){},ossFilter:function(t){var e=this;return this.$nextTick(function(){e.$refs.image.onload=function(){e.isComplete=!0}}),!t||t.indexOf("tailorx.cn")<0||!this.width&&!this.height?t:(t+=t.indexOf("?")>-1?"&":"?",t.replace("https://","//"),t.replace("http://","//"),this.isComplete=!1,t+"x-oss-process=image/resize,w_"+this.width+",h_"+this.height+(this.fill?",m_fill":""))}}}},ZOyh:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".tx-order-common-image[data-v-44ba65cc]{text-align:center;position:relative;display:inline-block}.tx-order-common-image img[data-v-44ba65cc]{max-width:100%;max-height:100%}.tx-order-common-image i[data-v-44ba65cc],.tx-order-common-image img[data-v-44ba65cc]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tx-order-common-image i[data-v-44ba65cc]{color:#eaeaea}.tx-order-common-image.no-url[data-v-44ba65cc]{background:none!important}.tx-order-common-image.no-url i[data-v-44ba65cc]{color:#f4f4f4}.tx-order-common-image.isRound[data-v-44ba65cc],.tx-order-common-image.isRound img[data-v-44ba65cc]{border-radius:50%}",""])},bSdk:function(t,e,a){"use strict";e.a={name:"systemTag",props:{readonly:{type:Boolean,default:!1},sexTag:String,styleTag:String,seasonTag:String},data:function(){return{tagList:{},sexTagId:this.sexTag||"",styleTagId:this.styleTag||"",seasonTagId:this.seasonTag||""}},mounted:function(){var t=this;this.$getTags(1).then(function(e){t.tagList=e})},watch:{sexTag:function(t){this.sexTagId=t||""},styleTag:function(t){this.styleTagId=t||""},seasonTag:function(t){this.seasonTagId=t||""}},methods:{getData:function(){return{sexTagId:this.sexTagId,styleTagId:this.styleTagId,seasonTagId:this.seasonTagId}},validate:function(){return this.sexTagId?this.styleTagId?!!this.seasonTagId||(this.$Message.warning("请选择季节标签"),!1):(this.$Message.warning("请选择款式标签"),!1):(this.$Message.warning("请选择性别标签"),!1)}}}},"d8+b":function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".model-allot .ivu-form-item[data-v-016b2c56]{margin-bottom:10px}.model-allot .designer-list[data-v-016b2c56]{line-height:20px;display:inline-block;margin-right:15px;margin-top:15px;text-align:center;cursor:pointer;opacity:.3}.model-allot .designer-list.active[data-v-016b2c56]{opacity:1}.model-allot .small-image[data-v-016b2c56]{max-height:88px;max-width:66px;margin-bottom:10px;margin-right:10px}",""])},hW7H:function(t,e,a){"use strict";function r(t){i||a("ss4w")}var o=a("EhCw"),s=a("LR6q"),i=!1,n=a("/Xao"),l=r,d=n(o.a,s.a,!1,l,"data-v-7da24b03",null);d.options.__file="src\\components\\order\\allotDesigner.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.a=d.exports},hrEj:function(t,e,a){"use strict";function r(t){i||a("KEEv")}var o=a("bSdk"),s=a("nNgm"),i=!1,n=a("/Xao"),l=r,d=n(o.a,s.a,!1,l,"data-v-d9adf4c6",null);d.options.__file="src\\components\\order\\systemTag.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.a=d.exports},kWYF:function(t,e,a){"use strict";(function(t){e.a={name:"addTag",props:{readonly:{type:Boolean,default:!1},dataList:{type:Array,default:[]},maxNum:{type:Number,default:5}},data:function(){return{selected:t.compact(this.dataList||[]),addTagName:"",recommendList:null,addTagLoading:!1}},mounted:function(){var t=this;this.$getTags(2).then(function(e){t.recommendList=e})},watch:{dataList:function(e,a){if(t.isEqual(e,a))return this.selected;this.selected=e||[]}},methods:{getData:function(e){return t.map(this.selected,function(t){switch(e){case 2:return t.tagName||t;case 3:return t.id||t}return t})},validate:function(){return!t.isEmpty(this.selected)||(this.$Message.warning("请选择自定义标签"),!1)},isSelected:function(e){return!!t.find(this.selected,function(a){return t.isString(a)?e.tagName===a:e.id===a.id})},deleteTag:function(e){this.selected=t.filter(this.selected,function(a){return t.isString(a)?a!==e:a.id!==e.id})},addTag:function(e){var a=this;return!t.isEmpty(this.selected)&&this.selected.length>=this.maxNum?this.$Message.warning("最多选择"+this.maxNum+"个标签！"):e?t.findWhere(this.selected,{id:e.id})?this.$Message.warning("标签已选择！"):this.selected.push(e):this.addTagName?t.findWhere(this.selected,{tagName:this.addTagName})||-1!==t.indexOf(this.selected,this.addTagName)?this.$Message.warning("标签已存在！"):(this.addTagLoading=!0,void this.ajax.post("/v3/store/tag/searchOrAddCommonTag",{tagName:this.addTagName}).then(function(t){a.selected.push(t)}).finally(function(){a.addTagLoading=!1})):this.$Message.warning("请输入自定义标签名称！")}}}}).call(e,a("u47Y"))},lWD7:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".tx-order-allot-designer .designer-box[data-v-7da24b03]{display:inline-block;margin-right:10px;cursor:pointer;margin-bottom:10px;position:relative}.tx-order-allot-designer .designer-box .card-active[data-v-7da24b03]{border:1px solid #2d8cf0;color:#2d8cf0}",""])},nNgm:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tagList.sex||t.tagList.style||t.tagList.season?a("div",{staticClass:"tx-order-system-tag"},[a("Form",{attrs:{"label-width":90}},[a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"性别标签："}},[t.readonly?a("Tag",{attrs:{color:"default"}},[t._v(t._s(t.sexTagId))]):t._e(),t._v(" "),t.readonly?t._e():a("RadioGroup",{model:{value:t.sexTagId,callback:function(e){t.sexTagId=e},expression:"sexTagId"}},t._l(t.tagList.sex,function(e,r){return a("Radio",{key:e.id,staticStyle:{"margin-right":"20px"},attrs:{label:e.id}},[t._v("\n          "+t._s(e.tagName)+"\n        ")])}))],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"款式标签："}},[t.readonly?a("Tag",{attrs:{color:"default"}},[t._v(t._s(t.styleTagId))]):t._e(),t._v(" "),t.readonly?t._e():a("RadioGroup",{model:{value:t.styleTagId,callback:function(e){t.styleTagId=e},expression:"styleTagId"}},t._l(t.tagList.style,function(e){return a("Radio",{key:e.id,staticStyle:{"margin-right":"20px"},attrs:{label:e.id}},[t._v(t._s(e.tagName)+"\n        ")])}))],1),t._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"季节标签："}},[t.readonly?a("Tag",{attrs:{color:"default"}},[t._v(t._s(t.seasonTagId))]):t._e(),t._v(" "),t.readonly?t._e():a("RadioGroup",{model:{value:t.seasonTagId,callback:function(e){t.seasonTagId=e},expression:"seasonTagId"}},t._l(t.tagList.season,function(e){return a("Radio",{key:e.id,staticStyle:{"margin-right":"20px"},attrs:{label:e.id}},[t._v(t._s(e.tagName)+"\n        ")])}))],1)],1)],1):t._e()},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.a=s},ss4w:function(t,e,a){var r=a("lWD7");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("8bSs")("3773b382",r,!1)},uLjh:function(t,e,a){"use strict";(function(t){var r=a("hrEj"),o=a("HCy0"),s=a("hW7H"),i=a("04QK");e.a={name:"order",components:{VSystemTag:r.a,VAddTag:o.a,VAllotDesigner:s.a,VImage:i.a},data:function(){var t=this;return{listLoading:!0,modelAllot:!1,submitAllotLoading:!1,modelAllotLoading:!1,order:[],user:{},orderItem:{},orderTagItem:{},selectedTags:[],selectDesigner:{},formAllot:{sexTagId:"",styleTagId:"",seasonTagId:"",commonTags:"",assignComment:""},exportModal:{show:!1,name:"",loading:!1,type:1},tagList:[],formSearch:{keyWord:"",page:0,pageLength:10,orderGrade:"",firstCategoryId:"",secondCategoryId:"",thirdCategoryId:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",node:"",status:"",time:[]},orderListTitle:[],listTitle:[{title:"订单编号",key:"orderNo",align:"center"},{title:"用户昵称",align:"center",key:"customerName"},{title:"用户手机号",align:"center",key:"customerPhone"},{title:"设计师",align:"center",key:"designerName"},{title:"系统标签",align:"center",key:"_systemTags",render:function(t,e){var a=e.row;return(a.genderTagName||"")+(a.genderTagName?" - ":"")+(a.typeTagName||"")+(a.typeTagName?" - ":"")+(a.seasonTagName||"")}},{title:"标签",key:"_commonTags",align:"center",render:function(t,e){return e.row.commonTags?e.row.commonTags.replace(/,/g,"/"):"-"}},{title:"原价",align:"center",key:"totalListPrice",render:function(t,e){return Number(e.row.totalListPrice)?"¥"+e.row.totalListPrice:"-"}},{title:"优惠",align:"center",key:"discount",render:function(t,e){return e.row.discount?(e.row.discount=Number(e.row.discount),e.row.discount>=1?"无优惠":(10*e.row.discount).toFixed(2)+"折"):"-"}},{title:"实际支付",align:"center",key:"totalAmount",render:function(t,e){return e.row.totalAmount?"¥"+e.row.totalAmount:"-"}},{title:"排号号码",align:"center",type:2,key:"sortNo",render:function(t,e){return e.row.sortNo||"-"}},{title:"订单金额",align:"center",type:2,key:"totalAmount",render:function(t,e){return e.row.totalAmount||"-"}},{title:"订单级别",align:"center",key:"orderGrade",render:function(t,e){return e.row.orderGrade||"-"}},{title:"创建时间",align:"center",key:"createDateStr"},{title:"处理状态",align:"center",key:"_operation",render:function(e,a){return 1!==t.user.userType&&3!==t.user.userType||2!==a.row.tacheId||a.row.designerId?"2"===a.row.operation?"待处理":"-":"待分配"}},{title:"流程节点",align:"center",key:"_step",render:function(t,e){return e.row.flowName+" - "+e.row.tacheName}},{title:"操作",width:150,align:"center",render:function(e,a){var r=[],o=a.row;return 1!==t.user.userType&&3!==t.user.userType||2!==o.tacheId||r.push(t.createBtn(e,"分配",function(){t.orderItem=o,t.getOrderInfo(o.orderNo)})),"2"===o.operation?o.designerId&&r.push(t.createBtn(e,"处理",function(){t.$router.push({path:"/order/customer/detail",query:{id:o.orderNo,type:1}})})):r.push(t.createBtn(e,"查看",function(){t.$router.push({path:"/order/customer/detail",query:{id:o.orderNo}})})),e("div",r)}}]}},created:function(){var e=this.$sessionStore.get("order_customer_search");this.user=this.$localStore.get("user")||{},t.isEmpty(e)||(this.formSearch=e),this.orderListTitle=t.filter(this.listTitle,function(t){return 2!==t.type}),this.getOrderList(),this.getTagList()},methods:{getOrderList:function(e){var a=this,r=void 0;t.isNumber(e)&&(this.formSearch.page=e-1),r=t.clone(this.formSearch),r.time[0]&&(r.startDate=this.$dateFormat(r.time[0],"yyyy-mm-dd")),r.time[1]&&(r.endDate=this.$dateFormat(r.time[1],"yyyy-mm-dd")),r.keyWord=r.keyWord.trim(),this.listLoading=!0,this.ajax.post("/v3/store/order/getOrderInfoList",r).then(function(t){a.listLoading=!1,a.order=t,a.$sessionStore.set("order_customer_search",r)})},getOrderInfo:function(e){var a=this;this.modelAllot=!0,this.modelAllotLoading=!0,this.orderTagItem={},this.ajax.post("/v3/store/order/getAssignOrderInfo",{orderNo:e}).then(function(e){t.map(e.pictureInfo.systemList,function(t){switch(t.type){case 1:a.formAllot.sexTagId=t.id;break;case 2:a.formAllot.styleTagId=t.id;break;case 3:a.formAllot.seasonTagId=t.id}}),a.selectedTags=t.pluck(e.pictureInfo.commonList,"id"),a.formAllot.assignComment=e.pictureInfo.assignComment,e.pictureInfo.new_pictures=e.pictureInfo.pictures.split(";"),a.selectDesigner={name:e.pictureInfo.designerName,photo:e.pictureInfo.designerPhoto,id:e.pictureInfo.designerId},a.orderTagItem=e,a.modelAllotLoading=!1})},getTagList:function(){var t=this;this.ajax.get("/v3/store/tag/getSearchTagList").then(function(e){t.tagList=e})},submitAllot:function(){var e=this,a=void 0;if(this.$refs.systemTag.validate()&&this.$refs.addTag.validate()&&this.$refs.allotDesigner.validate())return a=this.$refs.allotDesigner.getData(),this.formAllot=t.extend(this.formAllot,this.$refs.systemTag.getData()),this.formAllot.commonTags=this.$refs.addTag.getData(3).join("||"),this.formAllot.designerId=a.id,this.formAllot.orderNo=this.orderItem.orderNo,this.ajax.post("/v3/store/order/assignOrder",this.formAllot).then(function(t){e.$Message.success("分配成功！"),e.getOrderList(),e.modelAllot=!1,e.modelAllotLoading=!1}).catch(function(){e.modelAllotLoading=!1})},changePageSize:function(t){this.formSearch.pageLength=t,this.formSearch.page=0,this.getOrderList()},handleReset:function(){this.formSearch=this.$options.data().formSearch,this.getOrderList()},createBtn:function(t,e,a){return t("Button",{props:{type:"text",size:"small"},on:{click:function(){a&&a()}}},e)},showExportData:function(){var t=this.$localStore.get("user").storeName;t||this.$Message.warning("门店获取失败，请重新登录后再次使用！"),this.exportModal.name=t+"_客户订单报表",this.exportModal.name+="_"+this.$dateFormat(new Date,"yyyy-mm-dd HH:MM:ss"),this.exportModal.show=!0},exportData:function(){var e=this,a=t.clone(this.formSearch);a.page=0,1===this.exportModal.type&&(a.pageLength=this.order.totalSize),this.exportModal.loading=!0,this.$Message.loading("请稍等，正在导出数据..."),this.ajax.post("/v3/store/order/getOrderInfoList",a).then(function(a){var r=[],o=t.initial(e.listTitle);e.exportModal.loading=!1,e.exportModal.show=!1,r=t.map(a.data,function(t){return t.orderNo="#"+t.orderNo,t._systemTags=(t.genderTagName||"")+(t.genderTagName?" - ":"")+(t.typeTagName||"")+(t.typeTagName?" - ":"")+(t.seasonTagName||""),t._commonTags=t.commonTags?t.commonTags.replace(/,/g,"/"):"-",t._step=t.flowName+" - "+t.tacheName,t.sortNo=t.sortNo||"",1!==e.user.userType&&3!==e.user.userType||2!==t.tacheId||t.designerId?t._operation="2"===t.operation?"待处理":"-":t._operation="待分配",t}),e.$refs.orderTable.exportCsv({filename:e.exportModal.name,columns:o,data:r,quoted:!0})}).catch(function(){e.exportModal.loading=!1})}}}}).call(e,a("u47Y"))},wDhi:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,"",""])},zQ7w:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-order-common-image",class:{"no-url":!t.imgSrc,isRound:t.round},style:{width:0===t.width?"100%":t.width+"px",height:0===t.height?"100%":t.height+"px","background-color":t.backColor}},[t.isComplete?t._e():a("Icon",{style:{"font-size":t.width/2+"px"},attrs:{type:t.icon}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.isComplete,expression:"isComplete"}],ref:"image",attrs:{src:t.imgSrc}})],1)},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.a=s}});