webpackJsonp([15],{"+Mie":function(e,t,a){var r=a("ZOyh");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("8855bcb8",r,!1)},"04QK":function(e,t,a){"use strict";function r(e){n||a("+Mie")}var s=a("ZMJk"),i=a("zQ7w"),n=!1,o=a("/Xao"),c=r,l=o(s.a,i.a,!1,c,"data-v-44ba65cc",null);l.options.__file="src\\components\\common\\image.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.a=l.exports},"1nkq":function(e,t,a){var r=a("wDhi");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("6d4069e5",r,!1)},EnlS:function(e,t,a){"use strict";function r(e){n||a("YXyA")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("kEEj"),i=a("XcMQ"),n=!1,o=a("/Xao"),c=r,l=o(s.a,i.a,!1,c,"data-v-6d8265a2",null);l.options.__file="src\\views\\order\\sample\\index.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.default=l.exports},FGw9:function(e,t,a){t=e.exports=a("BkJT")(!1),t.push([e.i,"",""])},HCy0:function(e,t,a){"use strict";function r(e){n||a("1nkq")}var s=a("kWYF"),i=a("OtLT"),n=!1,o=a("/Xao"),c=r,l=o(s.a,i.a,!1,c,"data-v-378415f7",null);l.options.__file="src\\components\\order\\addTag.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.a=l.exports},KEEv:function(e,t,a){var r=a("FGw9");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("45a51d22",r,!1)},OtLT:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tx-order-add-tag"},[a("Form",{attrs:{"label-width":90}},[e.readonly?e._e():a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"添加标签："}},[a("Input",{staticStyle:{"max-width":"200px","margin-right":"10px"},attrs:{placeholder:"自定义标签"},model:{value:e.addTagName,callback:function(t){e.addTagName=t},expression:"addTagName"}}),e._v(" "),a("Button",{attrs:{type:"ghost",loading:e.addTagLoading},on:{click:function(t){e.addTag()}}},[e._v("添加")])],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"已选标签："}},e._l(e.selected,function(t){return a("Tag",{key:t.id||t,attrs:{closable:!e.readonly,color:e.readonly?"default":"blue"},on:{"on-close":function(a){e.deleteTag(t)}}},[e._v("\n        "+e._s(t.tagName||t)+"\n      ")])})),e._v(" "),e.readonly?e._e():a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"推荐标签："}},e._l(e.recommendList,function(t){return a("Tag",{key:t.id,attrs:{color:e.isSelected(t)?"blue":"default"},nativeOn:{click:function(a){e.addTag(t)}}},[e._v(e._s(t.tagName)+"\n      ")])}))],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.a=i},XcMQ:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-customer tx-container"},[a("div",{staticClass:"tx-form-search"},[a("Form",{ref:"formSearch",staticStyle:{"max-width":"1300px"},attrs:{model:e.formSearch,"label-width":65,inline:""}},[a("FormItem",{attrs:{label:"关键字"}},[a("Input",{attrs:{placeholder:"订单、昵称、设计师、手机号"},model:{value:e.formSearch.searchTerm,callback:function(t){e.$set(e.formSearch,"searchTerm",t)},expression:"formSearch.searchTerm"}})],1),e._v(" "),a("FormItem",{attrs:{label:"性别标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.formSearch.sexTagId,callback:function(t){e.$set(e.formSearch,"sexTagId",t)},expression:"formSearch.sexTagId"}},e._l(e.tagList,function(t){return 1==t.tagType?a("Option",{key:t.tagId,attrs:{value:t.tagId}},[e._v("\n            "+e._s(t.tagName)+"\n          ")]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"款式标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.formSearch.styleTagId,callback:function(t){e.$set(e.formSearch,"styleTagId",t)},expression:"formSearch.styleTagId"}},e._l(e.tagList,function(t){return 2==t.tagType?a("Option",{key:t.tagId,attrs:{value:t.tagId}},[e._v("\n            "+e._s(t.tagName)+"\n          ")]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"季节标签"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.formSearch.seasonTagId,callback:function(t){e.$set(e.formSearch,"seasonTagId",t)},expression:"formSearch.seasonTagId"}},e._l(e.tagList,function(t){return 3==t.tagType?a("Option",{key:t.tagId,attrs:{value:t.tagId}},[e._v("\n            "+e._s(t.tagName)+"\n          ")]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"处理状态"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.formSearch.status,callback:function(t){e.$set(e.formSearch,"status",t)},expression:"formSearch.status"}},[a("Option",{attrs:{value:"0"}},[e._v("待处理")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"240px"},attrs:{type:"daterange",confirm:"",placement:"bottom-end",placeholder:"选择时间范围"},model:{value:e.formSearch.time,callback:function(t){e.$set(e.formSearch,"time",t)},expression:"formSearch.time"}})],1),e._v(" "),a("FormItem",{attrs:{label:"订单金额"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("Input",{attrs:{placeholder:"最大值"},model:{value:e.formSearch.minPrice,callback:function(t){e.$set(e.formSearch,"minPrice",t)},expression:"formSearch.minPrice"}})],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("\n          ~")]),e._v(" "),a("Col",{attrs:{span:"11"}},[a("Input",{attrs:{placeholder:"最小值"},model:{value:e.formSearch.maxPrice,callback:function(t){e.$set(e.formSearch,"maxPrice",t)},expression:"formSearch.maxPrice"}})],1)],1)],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.getOrderList(1)}}},[e._v("查询")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleReset()}}},[e._v("重置")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"success"},on:{click:function(t){e.$router.push({path:"/order/sample/detail/edit"})}}},[e._v("\n          添加样衣单\n        ")])],1)],1)],1),e._v(" "),a("Table",{ref:"orderTable",staticStyle:{"margin-top":"20px"},attrs:{border:"",loading:e.listLoading,columns:e.listTitle,data:e.order.data}}),e._v(" "),a("div",{staticStyle:{"text-align":"right",width:"100%","margin-top":"30px"}},[a("Page",{attrs:{total:e.order.totalSize,current:e.formSearch.page+1,"show-total":"","show-elevator":"","show-sizer":"",placement:"top"},on:{"on-change":e.getOrderList,"on-page-size-change":e.changePageSize}})],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.a=i},YXyA:function(e,t,a){var r=a("wi4U");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("7a57f72e",r,!1)},ZMJk:function(e,t,a){"use strict";t.a={name:"commonImage",props:{src:{type:String},width:{type:Number,default:0},height:{type:Number,default:0},round:{type:Boolean,default:!1},icon:{type:String,default:"image"},backColor:{type:String,default:"#F4F4F4"},fill:{type:Boolean,default:!0}},data:function(){return{imgSrc:"",isComplete:!1}},mounted:function(){this.imgSrc=this.ossFilter(this.src)},watch:{src:function(e){this.imgSrc=this.ossFilter(e)}},methods:{getData:function(e){},ossFilter:function(e){var t=this;return this.$nextTick(function(){t.$refs.image.onload=function(){t.isComplete=!0}}),!e||e.indexOf("tailorx.cn")<0||!this.width&&!this.height?e:(e+=e.indexOf("?")>-1?"&":"?",e.replace("https://","//"),e.replace("http://","//"),this.isComplete=!1,e+"x-oss-process=image/resize,w_"+this.width+",h_"+this.height+(this.fill?",m_fill":""))}}}},ZOyh:function(e,t,a){t=e.exports=a("BkJT")(!1),t.push([e.i,".tx-order-common-image[data-v-44ba65cc]{text-align:center;position:relative;display:inline-block}.tx-order-common-image img[data-v-44ba65cc]{max-width:100%;max-height:100%}.tx-order-common-image i[data-v-44ba65cc],.tx-order-common-image img[data-v-44ba65cc]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tx-order-common-image i[data-v-44ba65cc]{color:#eaeaea}.tx-order-common-image.no-url[data-v-44ba65cc]{background:none!important}.tx-order-common-image.no-url i[data-v-44ba65cc]{color:#f4f4f4}.tx-order-common-image.isRound[data-v-44ba65cc],.tx-order-common-image.isRound img[data-v-44ba65cc]{border-radius:50%}",""])},bSdk:function(e,t,a){"use strict";t.a={name:"systemTag",props:{readonly:{type:Boolean,default:!1},sexTag:String,styleTag:String,seasonTag:String},data:function(){return{tagList:{},sexTagId:this.sexTag||"",styleTagId:this.styleTag||"",seasonTagId:this.seasonTag||""}},mounted:function(){var e=this;this.$getTags(1).then(function(t){e.tagList=t})},watch:{sexTag:function(e){this.sexTagId=e||""},styleTag:function(e){this.styleTagId=e||""},seasonTag:function(e){this.seasonTagId=e||""}},methods:{getData:function(){return{sexTagId:this.sexTagId,styleTagId:this.styleTagId,seasonTagId:this.seasonTagId}},validate:function(){return this.sexTagId?this.styleTagId?!!this.seasonTagId||(this.$Message.warning("请选择季节标签"),!1):(this.$Message.warning("请选择款式标签"),!1):(this.$Message.warning("请选择性别标签"),!1)}}}},hrEj:function(e,t,a){"use strict";function r(e){n||a("KEEv")}var s=a("bSdk"),i=a("nNgm"),n=!1,o=a("/Xao"),c=r,l=o(s.a,i.a,!1,c,"data-v-d9adf4c6",null);l.options.__file="src\\components\\order\\systemTag.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),t.a=l.exports},kEEj:function(e,t,a){"use strict";(function(e){var r=a("hrEj"),s=a("HCy0"),i=a("04QK");t.a={name:"order",components:{VSystemTag:r.a,VAddTag:s.a,VImage:i.a},data:function(){var e=this;return{listLoading:!0,order:[],user:{},tagList:[],formSearch:{searchTerm:"",page:0,pageLength:10,sexTagId:"",styleTagId:"",seasonTagId:"",minPrice:"",maxPrice:"",startTime:"",endTime:"",status:"",time:[]},listTitle:[{title:"订单编号",key:"sampleNo",align:"center"},{title:"系统标签",align:"center",render:function(e,t){var a=t.row;return(a.genderName||"")+(a.genderName?" - ":"")+(a.styleName||"")+(a.styleName?" - ":"")+(a.seasonName||"")}},{title:"自定义标签",align:"center",render:function(e,t){return t.row.tagsName?t.row.tagsName.replace(/,/g,"/"):"-"}},{title:"订单金额",align:"center",render:function(e,t){return t.row.price||"-"}},{title:"订单级别",align:"center",render:function(){return"D"}},{title:"创建时间",align:"center",key:"createTimeStr"},{title:"处理状态",align:"center",render:function(t,a){return 1!==e.user.userType&&3!==e.user.userType||2!==a.row.tacheId||a.row.designerId?"2"===a.row.operation?"待处理":"-":"待分配"}},{title:"操作",width:150,align:"center",render:function(t,a){var r=[],s=a.row;return"2"===s.operation?s.designerId&&r.push(e.createBtn(t,"处理",function(){e.$router.push({path:"/order/sample/detail",query:{id:s.id,type:1}})})):r.push(e.createBtn(t,"查看",function(){e.$router.push({path:"/order/sample/detail",query:{id:s.id}})})),t("div",r)}}]}},created:function(){var t=this.$sessionStore.get("order_sample_search");this.user=this.$localStore.get("user")||{},e.isEmpty(t)||(this.formSearch=t),this.getOrderList(),this.getTagList()},methods:{getOrderList:function(t){var a=this,r=void 0;e.isNumber(t)&&(this.formSearch.page=t-1),r=e.clone(this.formSearch),r.time[0]&&(r.startTime=this.$dateFormat(r.time[0],"yyyy-mm-dd")),r.time[1]&&(r.endTime=this.$dateFormat(r.time[1],"yyyy-mm-dd")),r.searchTerm=r.searchTerm.trim(),this.listLoading=!0,this.ajax.post("/v3/store/sampleOrder/findList",r).then(function(e){a.listLoading=!1,e.data=e.data||[],a.order=e,a.$sessionStore.set("order_sample_search",r)})},getTagList:function(){var e=this;this.ajax.get("/v3/store/tag/getSearchTagList").then(function(t){e.tagList=t})},changePageSize:function(e){this.formSearch.pageLength=e,this.formSearch.page=0,this.getOrderList()},handleReset:function(){this.formSearch=this.$options.data().formSearch,this.getOrderList()},createBtn:function(e,t,a){return e("Button",{props:{type:"text",size:"small"},on:{click:function(){a&&a()}}},t)}}}}).call(t,a("u47Y"))},kWYF:function(e,t,a){"use strict";(function(e){t.a={name:"addTag",props:{readonly:{type:Boolean,default:!1},dataList:{type:Array,default:[]},maxNum:{type:Number,default:5}},data:function(){return{selected:e.compact(this.dataList||[]),addTagName:"",recommendList:null,addTagLoading:!1}},mounted:function(){var e=this;this.$getTags(2).then(function(t){e.recommendList=t})},watch:{dataList:function(t,a){if(e.isEqual(t,a))return this.selected;this.selected=t||[]}},methods:{getData:function(t){return e.map(this.selected,function(e){switch(t){case 2:return e.tagName||e;case 3:return e.id||e}return e})},validate:function(){return!e.isEmpty(this.selected)||(this.$Message.warning("请选择自定义标签"),!1)},isSelected:function(t){return!!e.find(this.selected,function(a){return e.isString(a)?t.tagName===a:t.id===a.id})},deleteTag:function(t){this.selected=e.filter(this.selected,function(a){return e.isString(a)?a!==t:a.id!==t.id})},addTag:function(t){var a=this;return!e.isEmpty(this.selected)&&this.selected.length>=this.maxNum?this.$Message.warning("最多选择"+this.maxNum+"个标签！"):t?e.findWhere(this.selected,{id:t.id})?this.$Message.warning("标签已选择！"):this.selected.push(t):this.addTagName?e.findWhere(this.selected,{tagName:this.addTagName})||-1!==e.indexOf(this.selected,this.addTagName)?this.$Message.warning("标签已存在！"):(this.addTagLoading=!0,void this.ajax.post("/v3/store/tag/searchOrAddCommonTag",{tagName:this.addTagName}).then(function(e){a.selected.push(e)}).finally(function(){a.addTagLoading=!1})):this.$Message.warning("请输入自定义标签名称！")}}}}).call(t,a("u47Y"))},nNgm:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.tagList.sex||e.tagList.style||e.tagList.season?a("div",{staticClass:"tx-order-system-tag"},[a("Form",{attrs:{"label-width":90}},[a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"性别标签："}},[e.readonly?a("Tag",{attrs:{color:"default"}},[e._v(e._s(e.sexTagId))]):e._e(),e._v(" "),e.readonly?e._e():a("RadioGroup",{model:{value:e.sexTagId,callback:function(t){e.sexTagId=t},expression:"sexTagId"}},e._l(e.tagList.sex,function(t,r){return a("Radio",{key:t.id,staticStyle:{"margin-right":"20px"},attrs:{label:t.id}},[e._v("\n          "+e._s(t.tagName)+"\n        ")])}))],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"款式标签："}},[e.readonly?a("Tag",{attrs:{color:"default"}},[e._v(e._s(e.styleTagId))]):e._e(),e._v(" "),e.readonly?e._e():a("RadioGroup",{model:{value:e.styleTagId,callback:function(t){e.styleTagId=t},expression:"styleTagId"}},e._l(e.tagList.style,function(t){return a("Radio",{key:t.id,staticStyle:{"margin-right":"20px"},attrs:{label:t.id}},[e._v(e._s(t.tagName)+"\n        ")])}))],1),e._v(" "),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"季节标签："}},[e.readonly?a("Tag",{attrs:{color:"default"}},[e._v(e._s(e.seasonTagId))]):e._e(),e._v(" "),e.readonly?e._e():a("RadioGroup",{model:{value:e.seasonTagId,callback:function(t){e.seasonTagId=t},expression:"seasonTagId"}},e._l(e.tagList.season,function(t){return a("Radio",{key:t.id,staticStyle:{"margin-right":"20px"},attrs:{label:t.id}},[e._v(e._s(t.tagName)+"\n        ")])}))],1)],1)],1):e._e()},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.a=i},wDhi:function(e,t,a){t=e.exports=a("BkJT")(!1),t.push([e.i,"",""])},wi4U:function(e,t,a){t=e.exports=a("BkJT")(!1),t.push([e.i,"",""])},zQ7w:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tx-order-common-image",class:{"no-url":!e.imgSrc,isRound:e.round},style:{width:0===e.width?"100%":e.width+"px",height:0===e.height?"100%":e.height+"px","background-color":e.backColor}},[e.isComplete?e._e():a("Icon",{style:{"font-size":e.width/2+"px"},attrs:{type:e.icon}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isComplete,expression:"isComplete"}],ref:"image",attrs:{src:e.imgSrc}})],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};t.a=i}});