webpackJsonp([17],{"+Mie":function(t,e,a){var n=a("ZOyh");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("8855bcb8",n,!1)},"04QK":function(t,e,a){"use strict";function n(t){s||a("+Mie")}var r=a("ZMJk"),i=a("zQ7w"),s=!1,o=a("/Xao"),c=n,l=o(r.a,i.a,!1,c,"data-v-44ba65cc",null);l.options.__file="src\\components\\common\\image.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.a=l.exports},"0lXV":function(t,e,a){var n=a("Z97e");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("23f48762",n,!1)},Pnvq:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-container new-detail"},[a("div",{staticClass:"tx-form-search"},[a("Form",{attrs:{"label-width":75,inline:""}},[a("FormItem",{attrs:{label:"关键字"}},[a("Input",{attrs:{placeholder:"搜索资讯编号/标签/设计师名字/标签"},model:{value:t.searchParam.tag,callback:function(e){t.$set(t.searchParam,"tag",e)},expression:"searchParam.tag"}})],1),t._v(" "),a("FormItem",{attrs:{label:"性别标签"}},[a("Select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.searchParam.firstCategoryId,callback:function(e){t.$set(t.searchParam,"firstCategoryId",e)},expression:"searchParam.firstCategoryId"}},[t._l(t.systemSex,function(e,n){return[a("Option",{attrs:{value:e.tagId}},[t._v(t._s(e.tagName))])]})],2)],1),t._v(" "),a("FormItem",{attrs:{label:"季节标签"}},[a("Select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.searchParam.secondCategoryId,callback:function(e){t.$set(t.searchParam,"secondCategoryId",e)},expression:"searchParam.secondCategoryId"}},[t._l(t.systemSeason,function(e,n){return[a("Option",{attrs:{value:e.tagId}},[t._v(t._s(e.tagName))])]})],2)],1),t._v(" "),a("FormItem",{attrs:{label:"款式标签"}},[a("Select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.searchParam.thirdCategoryId,callback:function(e){t.$set(t.searchParam,"thirdCategoryId",e)},expression:"searchParam.thirdCategoryId"}},[t._l(t.systemStyle,function(e,n){return[a("Option",{attrs:{value:e.tagId}},[t._v(t._s(e.tagName))])]})],2)],1),t._v(" "),a("FormItem",{attrs:{label:"审核状态"}},[a("Select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.searchParam.status,callback:function(e){t.$set(t.searchParam,"status",e)},expression:"searchParam.status"}},[a("Option",{attrs:{value:1}},[t._v("待审核")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("已通过")]),t._v(" "),a("Option",{attrs:{value:3}},[t._v("未通过")])],1)],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.newList()}}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleReset("searchParam")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("div",[a("div",{staticStyle:{padding:"10px 0"}},[a("Button",{on:{click:t.newlistTableDelAll}},[t._v("批量删除")]),t._v(" "),a("Button",{on:{click:t.newlistTableAdd}},[t._v("添加资讯")])],1),t._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:t.newListTitle,data:t.newListData},on:{"on-selection-change":t.newListSelect}}),t._v(" "),a("div",{staticStyle:{"text-align":"right",width:"100%","margin-top":"20px"}},[a("Page",{attrs:{total:t.pageTotal,"show-total":"",current:t.searchParam.page+1,"show-total":"","show-elevator":"","show-sizer":"",placement:"top"},on:{"on-change":t.newList,"on-page-size-change":t.changePageSize}})],1),t._v(" "),t.dataLoading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])},r=[];n._withStripped=!0;var i={render:n,staticRenderFns:r};e.a=i},UXGl:function(t,e,a){"use strict";function n(t){s||a("0lXV")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("jXLE"),i=a("Pnvq"),s=!1,o=a("/Xao"),c=n,l=o(r.a,i.a,!1,c,"data-v-43a820dc",null);l.options.__file="src\\views\\new\\index.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=l.exports},Z97e:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,"",""])},ZMJk:function(t,e,a){"use strict";e.a={name:"commonImage",props:{src:{type:String},width:{type:Number,default:0},height:{type:Number,default:0},round:{type:Boolean,default:!1},icon:{type:String,default:"image"},backColor:{type:String,default:"#F4F4F4"},fill:{type:Boolean,default:!0}},data:function(){return{imgSrc:"",isComplete:!1}},mounted:function(){this.imgSrc=this.ossFilter(this.src)},watch:{src:function(t){this.imgSrc=this.ossFilter(t)}},methods:{getData:function(t){},ossFilter:function(t){var e=this;return this.$nextTick(function(){e.$refs.image.onload=function(){e.isComplete=!0}}),!t||t.indexOf("tailorx.cn")<0||!this.width&&!this.height?t:(t+=t.indexOf("?")>-1?"&":"?",t.replace("https://","//"),t.replace("http://","//"),this.isComplete=!1,t+"x-oss-process=image/resize,w_"+this.width+",h_"+this.height+(this.fill?",m_fill":""))}}}},ZOyh:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,".tx-order-common-image[data-v-44ba65cc]{text-align:center;position:relative;display:inline-block}.tx-order-common-image img[data-v-44ba65cc]{max-width:100%;max-height:100%}.tx-order-common-image i[data-v-44ba65cc],.tx-order-common-image img[data-v-44ba65cc]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tx-order-common-image i[data-v-44ba65cc]{color:#eaeaea}.tx-order-common-image.no-url[data-v-44ba65cc]{background:none!important}.tx-order-common-image.no-url i[data-v-44ba65cc]{color:#f4f4f4}.tx-order-common-image.isRound[data-v-44ba65cc],.tx-order-common-image.isRound img[data-v-44ba65cc]{border-radius:50%}",""])},jXLE:function(t,e,a){"use strict";var n=a("04QK");e.a={name:"picture",components:{VImage:n.a},data:function(){var t=this;return{dataLoading:!1,searchParam:{tag:"",firstCategoryId:"",secondCategoryId:"",thirdCategoryId:"",status:"",minPrice:"",maxPrice:"",pageLength:10,page:0},pageTotal:0,systemSex:[],systemStyle:[],systemSeason:[],selectCheck:[],newListData:[],newListTitle:[{title:"全选",type:"selection",align:"center",width:"60"},{title:"资讯编号",align:"center",key:"informationNo"},{title:"名称",align:"center",key:"name"},{title:"封面",align:"center",render:function(t,e){return t(n.a,{props:{src:e.row.coverUrl,width:70,height:50}})}},{title:"系统标签",align:"center",render:function(t,e){return e.row.systemTags?e.row.systemTags.replace(/,/g,"/"):""}},{title:"自定义标签",align:"center",render:function(t,e){return e.row.commonTags?e.row.commonTags.replace(/,/g,"/"):""}},{title:"状态",align:"center",render:function(t,e){var a=e.row;return 1==a.status?"待审核":2==a.status?"已通过":3==a.status?"已拒绝":""}},{title:"设计师",align:"center",key:"designerName"},{title:"创建时间",align:"center",key:"createDateStr",width:"150"},{title:"操作",align:"center",width:"150",render:function(e,a){var n=[],r=a.row;return 0==r.status&&1==r.status||(n.push(t.createBtn(e,"删除",function(){t.newlistTableDel(r.id)})),2!=r.status&&(n.push(t.createBtn(e,"编辑",function(){t.$router.push({path:"/new/detail",query:{newsId:r.id,type:2}})})),r.status||n.push(t.createBtn(e,"提交审核",function(){t.submitAgain(1,r.id)})),3==r.status&&n.push(t.createBtn(e,"重新提交",function(){t.submitAgain(2,r.id)})))),n.push(t.createBtn(e,"查看详情",function(){t.$router.push({path:"/new/detail",query:{newsId:r.id,type:3}})})),e("div",n)}}]}},created:function(){this.newList(),this.systemTag()},mounted:function(){},methods:{newList:function(t){var e=this,a=this;t&&(this.searchParam.page=t-1),this.dataLoading=!0,this.ajax.get("/v2/store/news/findNewsList",{params:this.searchParam}).then(function(t){a.newListData=t.data,a.pageTotal=t.totalSize}).finally(function(){e.dataLoading=!1})},systemTag:function(){var t=this;t.ajax.get("/v3/store/tag/getSearchTagList").then(function(e){t.systemSex=e.filter(function(t){return 1==t.tagType}),t.systemStyle=e.filter(function(t){return 2==t.tagType}),t.systemSeason=e.filter(function(t){return 3==t.tagType})})},changePageSize:function(t){this.searchParam.pageLength=t,this.searchParam.page=0,this.newList()},handleReset:function(t){this.searchParam=this.$options.data().searchParam,this.newList()},createBtn:function(t,e,a){return t("Button",{props:{type:"text",size:"small"},on:{click:function(){a&&a()}}},e)},newlistTableDel:function(t){var e=this;this.$Modal.confirm({title:"操作提示",content:"确认删除？",onOk:function(){e.ajax.get("/v2/store/news/delNews",{params:{delNewsIds:t}}).then(function(t){e.newList()})}})},newlistTableAdd:function(){this.$router.push({path:"/new/detail",query:{type:1}})},newListSelect:function(t){this.selectCheck=t},newlistTableDelAll:function(){var t="";if(t=this.selectCheck.map(function(t){return t.id}),!(t=t.join(",")))return void this.$Message.warning({content:"请选择要删除的数据",duration:3,top:20});this.newlistTableDel(t)},submitAgain:function(t,e){var a=this,n="";n=1==t?"确认提交审核？":"确认重新提交？",this.$Modal.confirm({title:"操作提示",content:n,onOk:function(){a.ajax.get("/v2/store/news/updateStatus",{params:{newsId:e}}).then(function(t){a.newList()})}})}}}},zQ7w:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tx-order-common-image",class:{"no-url":!t.imgSrc,isRound:t.round},style:{width:0===t.width?"100%":t.width+"px",height:0===t.height?"100%":t.height+"px","background-color":t.backColor}},[t.isComplete?t._e():a("Icon",{style:{"font-size":t.width/2+"px"},attrs:{type:t.icon}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.isComplete,expression:"isComplete"}],ref:"image",attrs:{src:t.imgSrc}})],1)},r=[];n._withStripped=!0;var i={render:n,staticRenderFns:r};e.a=i}});