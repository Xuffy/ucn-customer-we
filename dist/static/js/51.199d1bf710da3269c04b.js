webpackJsonp([51],{"/kdt":function(e,a,t){"use strict";function i(e){o||t("1zFs")}Object.defineProperty(a,"__esModule",{value:!0});var n=t("sdyt"),s=t("Q7Rt"),o=!1,r=t("Z0/y"),c=i,p=r(n.a,s.a,!1,c,"data-v-ef4c2634",null);p.options.__file="src\\views\\negotiation\\compare.vue",a.default=p.exports},"1zFs":function(e,a,t){var i=t("Fsmd");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("FIqI")("673d765a",i,!1,{})},Fsmd:function(e,a,t){a=e.exports=t("UTlt")(!1),a.push([e.i,".compare-overview .hd[data-v-ef4c2634]{height:50px;line-height:50px;color:#666;padding:0 20px}.compare-overview .fn[data-v-ef4c2634]{-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 20px}.compare-overview .fn .box-l[data-v-ef4c2634],.compare-overview .fn[data-v-ef4c2634]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.compare-overview .fn .box-l[data-v-ef4c2634]{margin:10px 0}.compare-overview .fn span[data-v-ef4c2634]{font-size:12px;color:#999}.compare-overview .fn .filedSelect[data-v-ef4c2634]{margin-left:10px}",""])},Q7Rt:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"compare-overview"},[t("h3",{staticClass:"hd"},[e._v(e._s(e.$i._baseText.compare))]),e._v(" "),t("div",[t("el-form",{staticClass:"demo-form-inline",staticStyle:{padding:"0 0 0 20px"},attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"Compare Name"}},[t("el-input",{attrs:{size:"mini",disabled:"only"===e.compareType},model:{value:e.compareName,callback:function(a){e.compareName=a},expression:"compareName"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"fn"},[t("div",{staticClass:"box-l"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:"only"===e.compareType,expression:"compareType  === 'only'"}],attrs:{type:"primary"},on:{click:function(a){e.compareType="modify"}}},[e._v(e._s(e.$i._baseText.modify))]),e._v(" "),"only"!==e.compareType?t("el-button",{on:{click:e.addNewCopare}},[e._v(e._s(e.$i._baseText.addNew))]):e._e(),e._v(" "),"only"!==e.compareType?t("el-button",{attrs:{type:"danger",disabled:e.tabData.length-e.checkedArg.length<2||e.checkedArg.length<=0},on:{click:e.deleteCompare}},[e._v(e._s(e.$i._baseText.delete+"("+e.checkedArg.length+")"))]):e._e(),e._v(" "),t("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.ChildrenCheckList,callback:function(a){e.ChildrenCheckList=a},expression:"ChildrenCheckList"}},[t("el-checkbox",{attrs:{label:0}},[e._v(e._s(e.$i._baseText.hideTheSame))]),e._v(" "),t("el-checkbox",{attrs:{label:1}},[e._v(e._s(e.$i._baseText.highlightTheDifferent))])],1)],1),e._v(" "),t("div",[t("span",[e._v(e._s(e.$i._baseText.compareBy)+" ")]),e._v(" "),t("el-radio-group",{attrs:{size:"mini"},model:{value:e.compareBy,callback:function(a){e.compareBy=a},expression:"compareBy"}},[t("el-radio-button",{attrs:{label:"0"}},[e._v(e._s(e.$i._baseText.inquiry))]),e._v(" "),t("el-radio-button",{attrs:{label:"1"}},[e._v(e._s(e.$i._baseText.SKU))])],1)],1)]),e._v(" "),t("v-table",{attrs:{data:e.tabData,loading:e.tabLoad,buttons:[{label:"detail",type:"detail"}]},on:{"change-checked":e.changeChecked,action:e.action}}),e._v(" "),t("v-pagination",{attrs:{pageNum:e.params.pn,pageSize:e.params.ps,"page-total":e.pageTotal},on:{"update:pageNum":function(a){e.$set(e.params,"pn",a)},"update:pageSize":function(a){e.$set(e.params,"ps",a)},"update:pageTotal":function(a){e.pageTotal=a},"page-change":e.handleSizeChange,"page-size-change":e.pageSizeChange}}),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"new"===e.compareType,expression:"compareType === 'new'"}],staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(a){e.onSubmit("save")}}},[e._v(e._s(e.$i._baseText.saveTheCompare))]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"only"===e.compareType,expression:"compareType === 'only'"}],staticStyle:{"margin-top":"10px"},attrs:{type:"danger"},on:{click:function(a){e.deleteCompare("all")}}},[e._v(e._s(e.$i._baseText.deleteTheCompare))]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"modify"===e.compareType,expression:"compareType === 'modify'"}],staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(a){e.onSubmit("save")}}},[e._v(e._s(e.$i._baseText.save))]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"modify"===e.compareType,expression:"compareType === 'modify'"}],staticStyle:{"margin-top":"10px"},attrs:{type:"info"},on:{click:e.cancel}},[e._v(e._s(e.$i._baseText.cancel))]),e._v(" "),t("add-new-inqury",{attrs:{"arg-disabled":e.argDisabled,compareId:e.params.id||null,disableds:e.disableds},on:{addInquiry:e.addCopare},model:{value:e.addNew,callback:function(a){e.addNew=a},expression:"addNew"}})],1)},n=[];i._withStripped=!0;var s={render:i,staticRenderFns:n};a.a=s},sdyt:function(e,a,t){"use strict";(function(e){var i=t("bGai");a.a={name:"compareOverview",data:function(){return{pageTotal:0,addNew:!1,compareName:"",tabLoad:!1,tabData:[],options:[{label:"wwww.baidu.com",id:"1"}],Filed:"",compareBy:"",ChildrenCheckList:"",checkedArg:[],compareType:"",params:{ps:10,pn:1,recycleCustomer:0},argDisabled:[],disableds:[]}},components:{"v-table":i.b,"add-new-inqury":i.j,"v-pagination":i.k,dropDownSingle:i.d},created:function(){this.compareBy=0,this.$route.query.ids?this.params.ids=this.$route.query.ids.split(","):this.$route.query.id&&(this.params.id=this.$route.query.id),this.$route.params.type&&(this.compareType=this.$route.params.type)},watch:{compareBy:function(){this.upData()},params:{handler:function(e){this.upData()},deep:!0}},methods:{compareByChange:function(e){this.compareBy=e},upData:function(){this.$route.query.ids?this.getNewList():this.getCompareList()},cancel:function(){var e=this;this.tabData.forEach(function(a,t){delete a._disabled,e.$set(e.tabData,t,a)}),this.compareType="only"},onSubmit:function(a){var t=this,i=[];this.tabData.forEach(function(a){a._disabled||i.push(e.findWhere(a,{key:"id"}).value)}),this.$confirm("此操作将会保存编辑是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.compareName?t.compareName=t.compareName:t.compareName=(new Date).getTime(),t.$ajax.post(t.$apis.POST_INQUIRY_COMPARE_RS,{inquiryIds:i,id:t.$route.query.id,compareName:t.compareName}).then(function(e){if("save"===a)return t.compareType="only"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},action:function(e,a){switch(a){case"detail":this.detail(e)}},detail:function(a){this.$router.push({path:"/negotiation/inquiryDetail",query:{id:e.findWhere(a,{key:"id"}).value}})},getCompareList:function(){var e=this,a=void 0,t=void 0;this.tabLoad=!0,this.compareBy+""=="0"?(a=this.$apis.POST_INQUIRY_COMPARE,t=this.$db.inquiryOverview.viewByInqury):(a=this.$apis.POST_INQUIRY_SKU,t=this.$db.inquiryOverview.viewBySKU),this.$ajax.post(a,this.params).then(function(a){e.pageTotal=a.tc,e.compareName=a.appendant?a.appendant.compareName:e.compareName,e.tabData=e.$getDB(t,a.datas),e.tabLoad=!1})},getNewList:function(){var e=this,a=void 0,t=void 0;this.tabLoad=!0,this.compareBy+""=="0"?(a=this.$apis.POST_INQIIRY_LIST,t=this.$db.inquiryOverview.viewByInqury):(a=this.$apis.POST_INQIIRY_LIST_SKU,t=this.$db.inquiryOverview.viewBySKU),this.$ajax.post(a,this.params).then(function(a){e.pageTotal=a.tc,e.tabData=e.$getDB(t,a.datas),e.tabLoad=!1,e.searchLoad=!1}).catch(function(){e.searchLoad=!1,e.tabLoad=!1})},changeChecked:function(a){var t=[];a.forEach(function(a){a._disabled||t.push(e.findWhere(a,{key:"id"}))}),this.checkedArg=t},addNewCopare:function(){this.addNew=!0,this.argDisabled=this.mapTabData(!0),this.disableds=this.mapTabData(!1)},deleteCompare:function(a){var t=this;"all"===a?this.$confirm("此操作将删除对比, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.post(t.$apis.POST_INQUIRY_COMPARE_DELETE,[t.$route.query.id]).then(function(e){t.$router.push("/negotiation/compare")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):(e.map(this.tabData,function(e,a){e._checked&&(e._disabled=!0,t.$set(t.tabData,a,e))}),this.checkedArg=[])},mapTabData:function(a){var t=[];return e.map(this.tabData,function(i){a?i._disabled||t.push(e.findWhere(i,{key:"id"}).value):i._disabled&&t.push(e.findWhere(i,{key:"id"}).value)}),t},addCopare:function(a){var t=this;if(!a.length)return this.$message("请先选择inquiry");this.compareBy+""=="0"?(this.$apis.POST_INQIIRY_LIST,this.$db.inquiryOverview.viewByInqury):(this.$apis.POST_INQIIRY_LIST_SKU,this.$db.inquiryOverview.viewBySKU),this.$ajax.post(this.$apis.POST_INQIIRY_LIST,{recycleCustomer:0,ids:a}).then(function(a){var i=t.$getDB(t.$db.inquiryOverview.viewByInqury,a.datas);e.map(t.tabData,function(a,t){a._disabled&&e.map(i,function(e){a.id.value===e.id.value&&(a._disabled=!1,a._checked=!1,e._add=!0)})});var n=[];e.map(i,function(e){e._add||n.push(e)}),n=n.concat(t.tabData),t.tabData=n,t.addNew=!1})},handleSizeChange:function(e){this.params.pn=e},pageSizeChange:function(e){this.params.ps=e}}}}).call(a,t("u47Y"))}});