webpackJsonp([45],{"34Xv":function(e,a,t){var s=t("WZ1o");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("FIqI")("b53ad434",s,!0,{})},HVA0:function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"message"},[t("div",{staticClass:"head"},[t("el-button",{on:{click:e.manageMessage}},[e._v(e._s(e.$i._baseText.messageManagement))]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.postRead}},[e._v(e._s(e.$i._baseText.markAsRead))])],1),e._v(" "),t("div",{staticClass:"spe-div"},[t("div",{staticClass:"View"},[t("el-radio-group",{attrs:{size:""},model:{value:e.viewByStatus,callback:function(a){e.viewByStatus=a},expression:"viewByStatus"}},[t("el-radio-button",{attrs:{label:"1"}},[e._v(e._s(e.$i._messages.platformMessage))]),e._v(" "),t("el-radio-button",{attrs:{label:"2"}},[e._v(e._s(e.$i._messages.companyMessage))]),e._v(" "),t("el-radio-button",{attrs:{label:"3"}},[e._v(e._s(e.$i._messages.messageSetting))])],1)],1),e._v(" "),t("div",{staticClass:"search"},[t("select-search",{staticClass:"search",attrs:{options:e.options,searchLoad:e.searchLoad},on:{inputChange:e.inputEnter}})],1)]),e._v(" "),t("div",{staticClass:"main"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isHide,expression:"isHide"}]},[t("v-table",{attrs:{data:e.tabData},on:{"change-checked":e.changeChecked}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"box"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.messageType,"tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"Type",align:"center","highlight-current-row":""},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(a.row.name))]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"Method",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{on:{change:e.handleCheckedCitiesChange}},[e._v("Email")]),e._v(" "),t("el-checkbox",{attrs:{disabled:""},model:{value:e.checked1,callback:function(a){e.checked1=a},expression:"checked1"}},[e._v("Platform")])]}}])})],1),e._v(" "),t("br")],1)],1)])])},i=[],n={render:s,staticRenderFns:i};a.a=n},WZ1o:function(e,a,t){a=e.exports=t("UTlt")(!1),a.push([e.i,".head{padding:10px 0}.box,.spe-div{padding-top:20px}.spe-div{overflow:hidden}.spe-div .View{float:left}.spe-div .search{float:right;margin-left:10px;margin-right:40px}",""])},fgdu:function(e,a,t){"use strict";function s(e){t("34Xv")}Object.defineProperty(a,"__esModule",{value:!0});var i=t("nNmJ"),n=t("HVA0"),o=t("Z0/y"),c=s,l=o(i.a,n.a,!1,c,null,null);a.default=l.exports},nNmJ:function(e,a,t){"use strict";(function(e){var s=t("a3Yh"),i=t.n(s),n=t("bGai");a.a={name:"message",components:{VTable:n.b,selectSearch:n.c},data:function(){var e;return e={searchLoad:!1,viewByStatus:"",isShow:!1,isHide:!0,options:[{id:"1",label:"Tittle"},{id:"2",label:"Content"}],activeName:"System Message",multipleSelection:[],currentPage:1,messageType:[{name:"System Message"},{name:"Conpany Message"},{name:"Pending Task"},{name:"Future Task"},{name:"FYI"},{name:"Push"}],params:{mark:0,content:""},checked:!1,checked1:!0,tabData:[],checkedData:[]},i()(e,"activeName","System Message"),i()(e,"checkValues",[]),i()(e,"tableData",[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]),e},methods:{handleClick:function(e,a){console.log(e,a)},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},changeChecked:function(e){this.checkedData=e},manageMessage:function(){this.viewByStatus+""=="1"?this.$router.push({path:"/message/messageManagement",query:{type:1}}):this.$router.push({path:"/message/messageManagement",query:{type:2}})},handleCheckedCitiesChange:function(e){console.log(e),console.log(this.messageType)},getTrue:function(e){},inputEnter:function(e){return console.log(e),e.keyType?e.key?(this.params.mark=e.keyType,this.params.content=e.key,void(this.searchLoad=!0)):this.$message("搜索内容不能为空"):this.$message("请选中搜索类型")},getDataInfo:function(){var e=this,a=void 0,t=void 0;this.tabLoad=!0,t=this.$db.message.table,a=this.viewByStatus+""=="1"?this.$apis.post_systemmessage_query:this.$apis.post_companymessage_query,this.$ajax.post(a,this.params).then(function(a){e.tabData=e.$getDB(t,a),e.tabLoad=!1,e.searchLoad=!1}).catch(function(){e.searchLoad=!1,e.tabLoad=!1})},postRead:function(){var a=this,t=void 0;t=this.viewByStatus+""=="1"?this.$apis.post_sys_updateread:this.$apis.post_company_updateread;var s=[];e.map(this.checkedData,function(a){e.isUndefined(a)||s.push(e.findWhere(a,{key:"subscribeId"}).value)}),this.$ajax.post(t,s).then(function(e){a.$message("系统将消息置为已读")}).catch(function(){})}},watch:{viewByStatus:function(){3==this.viewByStatus?(this.isShow=!0,this.isHide=!1):(this.isShow=!1,this.isHide=!0)}},created:function(){this.viewByStatus=1,this.getDataInfo()}}}).call(a,t("u47Y"))}});